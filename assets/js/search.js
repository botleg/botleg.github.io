function searchFrm(e){e.preventDefault(),""!==box.value.trim()&&search(box.value.trim().split(" ").join("+"))}function render(e){if(!e.total)return void(list.innerHTML='<span class="text">Sorry, No results.</span>');list.innerHTML="";for(var t=0;t<e.results.length;t++)list.innerHTML+='<li><a class="post-link" href="/stories/'+e.results[t].id+'">'+e.results[t].title+"</a><p>"+e.results[t].summary+"</p></li>"}function search(e){span.innerHTML=e.split("+").join(" "),location.hash=e,list.innerHTML='<span class="text">Loading results...</span>',xhr.open("GET",encodeURI("http://api.botleg.com/search/"+e)),xhr.onload=function(){200===xhr.status&&render(JSON.parse(xhr.responseText))},xhr.send()}var form=document.getElementById("searchform"),box=document.getElementById("searchbox"),span=document.getElementById("query"),list=document.getElementById("search-list"),query=location.hash.slice(1),xhr=new XMLHttpRequest;box.value=span.innerHTML=query.split("+").join(" "),search(query),form.addEventListener?form.addEventListener("submit",searchFrm,!1):form.attachEvent&&form.attachEvent("onsubmit",searchFrm);