<!DOCTYPE html> <html> <head> <title>Line numbers in Jekyll code blocks</title> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="One of the really cool feature of a Jekyll blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is r..."> <meta name="author" content="Hanzel Jesheen"> <meta itemprop="name" content="Line numbers in Jekyll code blocks"> <meta itemprop="description" content="One of the really cool feature of a Jekyll blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is r..."> <link rel="canonical" href="https://botleg.com/stories/line-numbers-in-jekyll-code-blocks/"> <link rel="alternate" type="application/rss+xml" title="Botleg" href="https://botleg.com/feed" /> </head> <body> <div class="page-content"> <div class="post"> <header style="background:#ff5858;background: -webkit-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-moz-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-ms-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-o-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:linear-gradient(90deg, #f857a6 10%, #ff5858 90%);"> <section class="site-header"> <div class="wrapper"> <a class="site-title" href="/">Botleg</a> <div id="search"> <a href="/feed/index.xml"><span class="rss-icon"> <svg viewBox="0 0 24 24" width="30px" height="30px"> <use xlink:href="/assets/images/sprites.svg#rss"></use> </svg></span> </a> <form id="searchform"> <input type="text" placeholder="search" id="searchbox"> </form> </div> </div> </section> <section class="post-header"> <div class="header-content"> <h1 class="post-title">Line numbers in Jekyll code blocks</h1> </div> </section> </header> <div class="wrapper"> <section> <article class="post-content"> <p class="post-meta">Written by Hanzel Jesheen on Sep 27, 2015 | <a href="/categories/jekyll">jekyll</a> </p> <p>One of the really cool feature of a <a href="built in support for syntax highlighting">Jekyll</a> blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is really good with the default settings except for one thing, line numbers. In this article, we are going to fix just that.</p> <h2 id="the-problem">The Problem</h2> <p>An ordinary code block without line numbers can be made by surrounding your code between <code class="highlighter-rouge">highlight</code> liquid tag. You can also specify the language of the code block as follows.</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">{% highlight language %}
//  YOUR CODE HERE
{% endhighlight %}</code></pre></figure> <p>The code block created will look something like this.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">handleRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="err">`</span><span class="nx">Web</span> <span class="nx">server</span> <span class="nx">running</span> <span class="nx">on</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">js</span> <span class="nx">v$</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">versions</span><span class="p">.</span><span class="nx">node</span><span class="p">}.</span><span class="err">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">);</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span></code></pre></figure> <p>To add line numbers to this code block. Just add the keyword <code class="highlighter-rouge">linenos</code> to the highlight tag. If the language of the code is <code class="highlighter-rouge">javascript</code>, the liquid tag will look like this.</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">{% highlight javascript linenos %}
//  YOUR CODE HERE
{% endhighlight %}</code></pre></figure> <p>After adding the line numbers, the code block will look something like this.</p> <p><img src="/assets/images/code-lines@2x.jpg" srcset="/assets/images/code-lines@1x.jpg 300w, /assets/images/code-lines@2x.jpg 600w, /assets/images/code-lines@3x.jpg 900w" sizes="(min-width: 960px) 900px, 100vw" alt="Code Block with line numbers" class="center-image" /> <em class="image-caption">Code Block with line numbers</em></p> <p>This is pretty bad. The line numbers and the code does not have any division and the colour of the line numbers confuses it with the code. Also, when we select the code, the line numbers are also selected.</p> <h2 id="the-tweaks">The Tweaks</h2> <p>We can fix the above problems with a couple of tweaks. We can modify the looks of the line numbers by changing the property of the class <code class="highlighter-rouge">.lineno</code>. We add this class to the <code class="highlighter-rouge">_syntax-highlighting.scss</code> file in our Jekyll project.</p> <p>First of all, we will change its colour to something more subtle. Then we add some padding and border.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ccc</span><span class="p">;</span> 
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span> 
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span> 
  <span class="nl">border-right</span><span class="p">:</span><span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ccc</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>To prevent the line numbers from being selected when we select the code block, we need to set the <code class="highlighter-rouge">user-select</code> property of <code class="highlighter-rouge">.lineno</code>. With vendor prefixes, it looks like this.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">-webkit-touch-callout</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-webkit-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-khtml-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-moz-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-ms-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>The <code class="highlighter-rouge">.linenos</code> class in <code class="highlighter-rouge">_syntax-highlighting.scss</code> will now look like this.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ccc</span><span class="p">;</span> 
  <span class="nl">display</span><span class="p">:</span><span class="n">inline-block</span><span class="p">;</span> 
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span> 
  <span class="nl">border-right</span><span class="p">:</span><span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ccc</span><span class="p">;</span>
  <span class="nl">-webkit-touch-callout</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-webkit-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-khtml-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-moz-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-ms-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <h2 id="conclusion">Conclusion</h2> <p>By tweaking the <code class="highlighter-rouge">.lineno</code> class, we can add better looking line numbers in Jekyll code blocks. You can also prevent the line numbers from being selected while selecting the code.</p> <p class="post-meta">Tags: highlight and jekyll </p> </article> <article class="post-comments" id="comments-box"> <h1 class="page-title">Comments</h1> <form id="new-comment"> <input type="text" id="nameField" placeholder="Enter your name" required><br/> <textarea id="textField" placeholder="Your comments please." required></textarea><br/> <button type="submit" id="commentBtn">Post Comment</button> </form> <div id="comments"></div> </article> </section> <aside class="post-aside"> <div class ="aside" id="cat-list"> <h1 class="page-heading">Categories</h1> <a href="/categories/misc">Misc</a><br/> <a href="/categories/jekyll">Jekyll</a><br/> <a href="/categories/cloud">Cloud</a><br/> <a href="/categories/Node.js">Node.js</a><br/> <a href="/categories/javascript">Javascript</a><br/> <a href="/categories/devops">Devops</a><br/> </div> <div class ="aside"> <h1 class="page-heading">Related Stories</h1> <a href=/stories/hello-world/>hello world :)</a><br/><a href=/stories/tricks-with-ssh/>Tricks with SSH</a><br/><a href=/stories/orchestrate-docker-containers-with-tutum/>Orchestrate Docker containers with Tutum</a><br/><a href=/stories/generators-in-javascript-and-python/>Generators in JavaScript and Python</a><br/><a href=/stories/docker-hosting-with-sloppyio/>Docker Hosting with sloppy.io</a><br/> </div> <p class="rss-subscribe">subscribe <a href="/feed">via RSS</a></p> <a href="#">Scroll to Top</a> </aside> </div> </div> </div> <footer class="site-footer"> <div class="footer-wrap"> <h2 class="footer-heading"><a href="/">botleg</a></h2> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <ul class="contact-list"> <li>By Hanzel Jesheen</li> <li><a href="mailto:blog@botleg.com">blog@botleg.com</a></li> </ul> </div> <div class="footer-col footer-col-2"> <ul class="social-media-list"> <li> <a href="https://github.com/botleg"> <span class="footer-icon"> <svg viewBox="0 0 16 16" width="16px" height="16px"> <use xlink:href="/assets/images/sprites.svg#gh"></use> </svg> </span> <span class="username">github</span> </a> </li> <li class="username"> <span class="footer-icon"> <svg viewBox="0 0 24 24" width="16px" height="16px"> <use xlink:href="/assets/images/sprites.svg#rss"></use> </svg> </span> subscribe <a href="/feed">via RSS</a> </li> </ul> </div> <div class="footer-col footer-col-3"> <p>Hi, botleg is a blog where you can find tutorials and techniques in web development, devops, databases, cloud computing and anything related to technology.</p> </div> </div> </div> </footer> <style type="text/css">body,h1,h2{font-weight:300}.wrapper:after{clear:both}html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}body{background-color:#fdfdfd;color:#111;font-family:Helvetica,Arial,sans-serif;font-size:18px;line-height:1.6;text-size-adjust:100%}h1,h2,p,ul{margin-bottom:10px}.wrapper section{margin-top:30px}ul{margin-left:20px}a{color:#2a7ae2;text-decoration:none}.site-header{min-height:60px;position:relative}.site-title{margin-bottom:0;float:left;font-size:28px;line-height:60px;text-transform:lowercase;color:#424242}#search #searchbox{border:0;color:#fdfdfd;float:right;}.page-content{padding:0 0 20px}.post-meta{color:#828282;display:inline-block;font-size:15.75px}.post-header{-webkit-box-align:center;-moz-box-align:center;-ms-box-align:center;box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-moz-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#fdfdfd;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-align:center;-ms-flex-pack:center;height:300px;margin-bottom:10px}.post-header .header-content{text-align:center;max-width:600px}.icon{background-position:10px center;background-repeat:no-repeat;background-size:30px;padding:0 30px 0 45px}.icon span{color:#fdfdfd;display:none}@media screen and (min-width:400px){.icon span{display:inline}}.post-title{color:#e8e8e8;font-size:36px}.page-content,.post-content{margin-bottom:20px}.page-content h2,.post-content h2{font-size:32px}</style> <script> var cb = function() { var l = document.createElement('link'); l.rel = 'stylesheet'; l.href = '/assets/main.css?v210'; var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h); }; var raf = requestAnimationFrame || mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame; if (raf) raf(cb); else window.addEventListener('load', cb); </script> <script async type="text/javascript" src="/assets/js/post.js"></script> </body> </html>
