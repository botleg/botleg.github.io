<!DOCTYPE html> <html> <head> <title>Line numbers in Jekyll code blocks</title> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="One of the really cool feature of a Jekyll blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is r..."> <meta name="author" content="Hanzel Jesheen"> <meta itemprop="name" content="Line numbers in Jekyll code blocks"> <meta itemprop="description" content="One of the really cool feature of a Jekyll blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is r..."> <link rel="canonical" href="http://botleg.com/stories/line-numbers-in-jekyll-code-blocks/"> <link rel="alternate" type="application/rss+xml" title="Botleg" href="http://botleg.com/feed" /> </head> <body> <header class="site-header"> <div class="wrapper"> <a class="site-title" href="/">Botleg</a> <div id="search"> <form id="searchform"> <input type="text" placeholder="search" id="searchbox"> </form> </div> </div> </header> <div class="page-content"> <div class="post"> <header class="post-header" style="background:#ff5858;background: -webkit-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-moz-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-ms-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:-o-linear-gradient(90deg, #f857a6 10%, #ff5858 90%);background:linear-gradient(90deg, #f857a6 10%, #ff5858 90%);"> <div class="header-content"> <h1 class="post-title">Line numbers in Jekyll code blocks</h1> </div> </header> <div class="wrapper"> <section> <article class="post-content"> <p class="post-meta">Written by Hanzel Jesheen on Sep 27, 2015 | <a href="/categories/jekyll">jekyll</a> </p> <p>One of the really cool feature of a <a href="built in support for syntax highlighting">Jekyll</a> blog generator is the in-built support for syntax highlighting in code blocks. The styling of the code blocks is really good with the default settings except for one thing, line numbers. In this article, we are going to fix just that.</p> <h2 id="the-problem">The Problem</h2> <p>An ordinary code block without line numbers can be made by surrounding your code between <code class="highlighter-rouge">highlight</code> liquid tag. You can also specify the language of the code block as follows.</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">{% highlight language %}
//  YOUR CODE HERE
{% endhighlight %}</code></pre></figure> <p>The code block created will look something like this.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">handleRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="err">`</span><span class="nx">Web</span> <span class="nx">server</span> <span class="nx">running</span> <span class="nx">on</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">js</span> <span class="nx">v$</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">versions</span><span class="p">.</span><span class="nx">node</span><span class="p">}.</span><span class="err">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">);</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span></code></pre></figure> <p>To add line numbers to this code block. Just add the keyword <code class="highlighter-rouge">linenos</code> to the highlight tag. If the language of the code is <code class="highlighter-rouge">javascript</code>, the liquid tag will look like this.</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">{% highlight javascript linenos %}
//  YOUR CODE HERE
{% endhighlight %}</code></pre></figure> <p>After adding the line numbers, the code block will look something like this. <img src="/assets/images/code-lines.png" alt="Code Block with line numbers" class="center-image" /> <em class="image-caption">Code Block with line numbers</em></p> <p>This is pretty bad. The line numbers and the code does not have any division and the colour of the line numbers confuses it with the code. Also, when we select the code, the line numbers are also selected.</p> <h2 id="the-tweaks">The Tweaks</h2> <p>We can fix the above problems with a couple of tweaks. We can modify the looks of the line numbers by changing the property of the class <code class="highlighter-rouge">.lineno</code>. We add this class to the <code class="highlighter-rouge">_syntax-highlighting.scss</code> file in our Jekyll project.</p> <p>First of all, we will change its colour to something more subtle. Then we add some padding and border.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ccc</span><span class="p">;</span> 
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span> 
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span> 
  <span class="nl">border-right</span><span class="p">:</span><span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ccc</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>To prevent the line numbers from being selected when we select the code block, we need to set the <code class="highlighter-rouge">user-select</code> property of <code class="highlighter-rouge">.lineno</code>. With vendor prefixes, it looks like this.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">-webkit-touch-callout</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-webkit-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-khtml-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-moz-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-ms-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>The <code class="highlighter-rouge">.linenos</code> class in <code class="highlighter-rouge">_syntax-highlighting.scss</code> will now look like this.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.lineno</span> <span class="p">{</span> 
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ccc</span><span class="p">;</span> 
  <span class="nl">display</span><span class="p">:</span><span class="n">inline-block</span><span class="p">;</span> 
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span> 
  <span class="nl">border-right</span><span class="p">:</span><span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ccc</span><span class="p">;</span>
  <span class="nl">-webkit-touch-callout</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-webkit-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-khtml-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-moz-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">-ms-user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <h2 id="conclusion">Conclusion</h2> <p>By tweaking the <code class="highlighter-rouge">.lineno</code> class, we can add better looking line numbers in Jekyll code blocks. You can also prevent the line numbers from being selected while selecting the code.</p> <p class="post-meta">Tags: highlight and jekyll </p> </article> <article class="post-comments" id="comments-box"> <h1 class="page-title">Comments</h1> <form id="new-comment"> <input type="text" id="nameField" placeholder="Enter your name" required><br/> <textarea id="textField" placeholder="Your comments please." required></textarea><br/> <button type="submit" id="commentBtn">Post Comment</button> </form> <div id="comments"></div> </article> </section> <aside> <div class ="aside" id="cat-list"> <h1 class="page-heading">Categories</h1> <a href="/categories/misc">Misc</a><br/> <a href="/categories/jekyll">Jekyll</a><br/> <a href="/categories/cloud">Cloud</a><br/> <a href="/categories/Node.js">Node.js</a><br/> <a href="/categories/javascript">Javascript</a><br/> <a href="/categories/web">Web</a><br/> </div> <div class ="aside"> <h1 class="page-heading">Related Stories</h1> <a href=/stories/hello-world/>hello world :)</a><br/><a href=/stories/generators-in-javascript-and-python/>Generators in JavaScript and Python</a><br/><a href=/stories/https-with-lets-encrypt-and-nginx/>HTTPS with Let's Encrypt and nginx</a><br/><a href=/stories/using-your-sessions-with-socketio/>Using your sessions with Socket.IO</a><br/><a href=/stories/bookmarklet-scripts/>Bookmarklet Scripts</a><br/> </div> <p class="rss-subscribe">subscribe <a href="/feed">via RSS</a></p> <a href="#">Scroll to Top</a> </aside> </div> </div> </div> <footer class="site-footer"> <div class="footer-wrap"> <h2 class="footer-heading">Botleg</h2> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <ul class="contact-list"> <li>By Hanzel Jesheen</li> <li><a href="mailto:blog@botleg.com">blog@botleg.com</a></li> <li> <a href="https://github.com/botleg"><span class="username">botleg </span> <span class="icon"> <svg viewBox="0 0 16 16" width="16px" height="16px"> <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/> </svg> </span> </a> </li> </ul> </div> <div class="footer-col footer-col-2"> <ul class="social-media-list"> <li><a href="https://github.com/hanzeljesheen"><span class="username">github</span></a></li> <li><a href="https://bitbucket.org/hanzel"><span class="username">bitbucket</span></a></li> </ul> </div> <div class="footer-col footer-col-3"> <p>Hi, botleg is a blog where you can find tutorials and techniques in web development, big data analysis, databases, cloud computing and anything related to technology.</p> </div> </div> </div> </footer> <script> var cb = function() { var l = document.createElement('link'); l.rel = 'stylesheet'; l.href = '/assets/main.css?v200'; var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h); }; var raf = requestAnimationFrame || mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame; if (raf) raf(cb); else window.addEventListener('load', cb); </script> <script type="text/javascript" src="/assets/js/home.js"></script> </body> </html>
