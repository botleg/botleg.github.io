<!DOCTYPE html> <html> <head> <title>Generators in JavaScript and Python</title> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="With the introduction of JavaScript ES6 or ES2015, we got a whole lot of new features for the language. Among those, generator sure is an interesting one. Ge..."> <meta name="author" content="Hanzel Jesheen"> <meta itemprop="name" content="Generators in JavaScript and Python"> <meta itemprop="description" content="With the introduction of JavaScript ES6 or ES2015, we got a whole lot of new features for the language. Among those, generator sure is an interesting one. Ge..."> <link rel="canonical" href="https://botleg.com/stories/generators-in-javascript-and-python/"> <link rel="alternate" type="application/rss+xml" title="Botleg" href="https://botleg.com/feed" /> </head> <body> <div class="page-content"> <div class="post"> <header style="background:#6441A5;background:-webkit-linear-gradient(90deg, #6441A5 10%, #2a0845 90%);background:-moz-linear-gradient(90deg, #6441A5 10%, #2a0845 90%);background:-ms-linear-gradient(90deg, #6441A5 10%, #2a0845 90%);background:-o-linear-gradient(90deg, #6441A5 10%, #2a0845 90%);background:linear-gradient(90deg, #6441A5 10%, #2a0845 90%);"> <section class="site-header"> <div class="wrapper"> <a class="site-title" href="/">Botleg</a> <div id="search"> <a href="/feed/index.xml"><span class="rss-icon"> <svg viewBox="0 0 24 24" width="30px" height="30px"> <use xlink:href="/assets/images/sprites.svg#rss"></use> </svg></span> </a> <form id="searchform"> <input type="text" placeholder="search" id="searchbox"> </form> </div> </div> </section> <section class="post-header"> <div class="header-content"> <h1 class="post-title">Generators in JavaScript and Python</h1> </div> </section> </header> <div class="wrapper"> <section> <article class="post-content"> <p class="post-meta">Written by Hanzel Jesheen on Oct 5, 2015 | <a href="/categories/javascript">javascript</a> </p> <p>With the introduction of JavaScript ES6 or ES2015, we got a whole lot of new features for the language. Among those, <code class="highlighter-rouge">generator</code> sure is an interesting one. Generator is basically a function which can be paused and resumed as we need it. The state of the generator stays constant while it’s paused. You can read more about this <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators#Generators">here</a>. In this article, we are going to compare generators in JavaScript to the ones in a language that has been supporting it for a long time now, Python.</p> <p>We will see how to create an <code class="highlighter-rouge">iterator</code> with generator function. Iterator contains a set of values in a sequence. We can go through the elements in an iterator with a <code class="highlighter-rouge">for</code> loop. For this example, we will create an iterator for <code class="highlighter-rouge">Fibonacci Numbers</code>.</p> <h2 id="generator">Generator</h2> <p>Generator is just another function. The only difference is that it can be paused and resumed. While the normal functions use <code class="highlighter-rouge">return</code> to give back a value and stop its execution, a generator function uses <code class="highlighter-rouge">yield</code> to give a value back and pause the function. We can resume the function with the <code class="highlighter-rouge">next()</code> command and the function will give back the value in the next yield. We can also go through the values in a generator with a loop. The generator functions can also have a <code class="highlighter-rouge">return</code> statement which can be used to terminate its execution.</p> <h2 id="javascript">JavaScript</h2> <p>In JavaScript, a generator definition contains an <code class="highlighter-rouge">*</code>. It could also have a yield statement.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">getFibonacci</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//yield something;</span>
<span class="p">}</span></code></pre></figure> <p>In the <a href="https://en.wikipedia.org/wiki/Fibonacci_number">Fibonacci series</a>, the first two numbers are 0 and 1 and the rest is the sum of previous two values. So, it goes like <code class="highlighter-rouge">0, 1, 1, 2, 3, 5, 8, 13, 21, ...</code>. The code for getting Fibonacci Numbers less than 100 is this.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">getFibonacci</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="nx">b</span><span class="p">;</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">-</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">num</span> <span class="nx">of</span> <span class="nx">getFibonacci</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">num</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>Note that ES6 is required for running this code. We first define the generator function <code class="highlighter-rouge">getFibonacci()</code> with the <code class="highlighter-rouge">*</code>. The first value in the sequence is <code class="highlighter-rouge">0</code>, so we have to return that with an yield. We can use an expression with yield statement and the result of the expression is send out with yield. Now we store the previous two values in <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code>. The starting values of <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code> are <code class="highlighter-rouge">0</code> and <code class="highlighter-rouge">1</code> respectively, the first two values in the sequence. We can assign value to <code class="highlighter-rouge">a</code> and yield it in a single statement.</p> <p>We start an infinite <code class="highlighter-rouge">while</code> loop. We now yield the value in <code class="highlighter-rouge">b</code>, which is now the second number in the sequence. Now we set <code class="highlighter-rouge">b</code> to the sum of <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code> and set <code class="highlighter-rouge">a</code> as the previous value of <code class="highlighter-rouge">b</code>. This can be done simply by,</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">-</span> <span class="nx">a</span><span class="p">;</span></code></pre></figure> <p>Now, <code class="highlighter-rouge">b</code> will contain the third number in the sequence, which is then given out with yield. This goes on and on with <code class="highlighter-rouge">b</code> always having the next number in the sequence.</p> <p>This generator acts as an iterator factory for Fibonacci Numbers. We can loop through this iterator with the <code class="highlighter-rouge">for .. of</code> loop. As this gives all the Fibonacci Numbers till infinity, we need a <code class="highlighter-rouge">break</code> condition. Here, we take the Fibonacci Numbers less than 100 and logs it.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="nx">num</span> <span class="nx">of</span> <span class="nx">getFibonacci</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">num</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <h2 id="python">Python</h2> <p>The python implementation of this same problem is very similar. The code for the solution is this.</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getFibonacci</span><span class="p">():</span>
  <span class="k">yield</span> <span class="mi">0</span>
  <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>

  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">yield</span> <span class="n">b</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">getFibonacci</span><span class="p">():</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="k">break</span>
  <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></code></pre></figure> <p>We start with the <code class="highlighter-rouge">getFibonacci()</code> generator function. In python, there is no difference between generators and normal function definition. The only difference is in the appearence of the <code class="highlighter-rouge">yield</code> keyword. We can’t use expressions with yield in Python, as we have done in JavaScript. So, we will yield the first number in the sequence <code class="highlighter-rouge">0</code> and then assign the initial values to <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code>.</p> <p>As before, we than have an infinite loop which yields the next value in the sequence and calculates new values of <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code>. This is same as in JavaScript.</p> <p>To loop through the numbers in the <code class="highlighter-rouge">getFibonacci()</code> iterator, we can use <code class="highlighter-rouge">for .. in</code> loop. The rest is same as in the case of JavaScript.</p> <h2 id="conclusion">Conclusion</h2> <p>Except for some subtle differences, the implementation of generators in JavaScript and Python are really similar. With ES6, we can program in JavaScript as we do it in Java, C, or Python.</p> <p class="post-meta">Tags: python, generator, iterator, es6, es2015, fibonacci, yield, and javascript </p> </article> <article class="post-comments" id="comments-box"> <h1 class="page-title">Comments</h1> <form id="new-comment"> <input type="text" id="nameField" placeholder="Enter your name" required><br/> <textarea id="textField" placeholder="Your comments please." required></textarea><br/> <button type="submit" id="commentBtn">Post Comment</button> </form> <div id="comments"></div> </article> </section> <aside class="post-aside"> <div class ="aside" id="cat-list"> <h1 class="page-heading">Categories</h1> <a href="/categories/misc">Misc</a><br/> <a href="/categories/jekyll">Jekyll</a><br/> <a href="/categories/cloud">Cloud</a><br/> <a href="/categories/Node.js">Node.js</a><br/> <a href="/categories/javascript">Javascript</a><br/> <a href="/categories/devops">Devops</a><br/> </div> <div class ="aside"> <h1 class="page-heading">Related Stories</h1> <a href=/stories/hello-world/>hello world :)</a><br/><a href=/stories/tricks-with-ssh/>Tricks with SSH</a><br/><a href=/stories/load-balancing-with-docker-swarm/>Load Balancing with Docker Swarm</a><br/><a href=/stories/line-numbers-in-jekyll-code-blocks/>Line numbers in Jekyll code blocks</a><br/><a href=/stories/https-with-lets-encrypt-and-nginx/>HTTPS with Let's Encrypt and nginx</a><br/> </div> <p class="rss-subscribe">subscribe <a href="/feed">via RSS</a></p> <a href="#">Scroll to Top</a> </aside> </div> </div> </div> <footer class="site-footer"> <div class="footer-wrap"> <h2 class="footer-heading"><a href="/">botleg</a></h2> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <ul class="contact-list"> <li>By Hanzel Jesheen</li> <li><a href="mailto:blog@botleg.com">blog@botleg.com</a></li> </ul> </div> <div class="footer-col footer-col-2"> <ul class="social-media-list"> <li> <a href="https://github.com/botleg"> <span class="footer-icon"> <svg viewBox="0 0 16 16" width="16px" height="16px"> <use xlink:href="/assets/images/sprites.svg#gh"></use> </svg> </span> <span class="username">github</span> </a> </li> <li class="username"> <span class="footer-icon"> <svg viewBox="0 0 24 24" width="16px" height="16px"> <use xlink:href="/assets/images/sprites.svg#rss"></use> </svg> </span> subscribe <a href="/feed">via RSS</a> </li> </ul> </div> <div class="footer-col footer-col-3"> <p>Hi, botleg is a blog where you can find tutorials and techniques in web development, devops, databases, cloud computing and anything related to technology.</p> </div> </div> </div> </footer> <style type="text/css">body,h1,h2{font-weight:300}.wrapper:after{clear:both}html{box-sizing:border-box}body{background-color:#fdfdfd;color:#111;font-family:Helvetica,Arial,sans-serif;font-size:18px;line-height:1.6;}.wrapper section{margin-top:30px}a{color:#2a7ae2;text-decoration:none}.site-header{min-height:60px;position:relative}.site-title{margin-bottom:0;float:left;font-size:28px;line-height:60px;text-transform:lowercase;color:#e8e8e8}.post-header{box-align:center;justify-content:center;color:#fdfdfd;display:flex;height:300px;margin-bottom:10px}.rss-icon,#searchbox{display:none;}.post-header .header-content{text-align:center;max-width:600px}.icon{background-position:10px center;background-repeat:no-repeat;background-size:30px;padding:0 30px 0 45px}.icon span{color:#fdfdfd;display:none}@media screen and (min-width:400px){.icon span{display:inline}}.post-title{color:#e8e8e8;font-size:36px}.page-content,.post-content{margin-bottom:20px}.page-content h2,.post-content h2{font-size:32px}</style> <script> var cb = function() { var l = document.createElement('link'); l.rel = 'stylesheet'; l.href = '/assets/main.css?v310'; var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h); }; var raf = requestAnimationFrame || mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame; if (raf) raf(cb); else window.addEventListener('load', cb); </script> <script async type="text/javascript" src="/assets/js/post.js"></script> </body> </html>
